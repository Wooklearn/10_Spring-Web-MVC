<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>ğŸ‘€ì¹´í…Œê³ ë¦¬ ì½”ë“œ ì¡°íšŒğŸ‘€</h1>

    <form action="/menu/categoryList" method="post">
        <label>ì¹´í…Œê³ ë¦¬ ì½”ë“œ : </label>
        <select name="categoryList" id="categoryList"></select>
        <button type="submit" onclick=location.href='/menu/categoryList'>ì¡°íšŒ</button>
    </form>

    <script>
        fetch("/menu/categoryList")
            // json í˜•ì‹ì˜ ë¬¸ìì—´ ê°’ì„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(res => res.json())    // ì´ êµ¬ë¬¸ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë³€í™˜ ì™„ë£Œ
            .then(data => {             // ë³€í™˜ ëœ ë°ì´í„°ê°€ data ë³€ìˆ˜ì— ë‹´ê¹€
                console.log(data);
                // select íƒœê·¸ ê°€ì ¸ì˜´.
                const $categoryCode = document.getElementById("categoryList");
                // for in ë°˜ë³µë¬¸ : ë³€ìˆ˜ì— data ì— ìˆëŠ” í”„ë¡œí¼í‹° í‚¤ ëŒ€ì…
                for (let index in data) {
                    const $option = document.createElement("option");
                    $option.value = data[index].code;
                    $option.textContent = data[index].name;
                    $categoryCode.appendChild($option);
                }
            })
    </script>


</body>
</html>